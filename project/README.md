# Проектная работа

## Основная идея алгоритма

Алгоритм используется для разбора названий промышленных стандартов

- Подшипник роликовый тип 102000 исп.1 ГОСТ 8328-75
- Винт с полупотайной головкой ГОСТ Р ИСО 7047 М5х20-4.8-Z
- Шайба класса точности C ГОСТ 11371-78

## Пример разбора запроса

"Подшипник роликовый тип 102000 исп.1 ГОСТ 8328-75"

- слово **подшипник**
- слово **роликовый**
- код типа **102000**
- код исполнения **1**
- код стандарта типа **ГОСТ** с номером **8328-75**

## Тестирование эффективности алгоритмов

Для тестирования использовался встроенный Golang механизм benchmark

1) Базовая версия (шесть конечных автоматов, без предобработки строки)
2) Версия с предобработкой строки (нормализация пробелов)
3) Оптимизированный вариант (два конечных автомата, оптимизации)
4) Вариант на регулярных выражениях
5) Исходная версия алгоритма (проприетарная)

Исходные данные тестов

1) Одна строка со всеми возможными паттернами
2) Последовательный разбор тестовых образцов (около 127 шт.)
3) Последовательный разбор реальных образцов (около 2500 шт.)

### Разбор полного образца

| Версия алгоритма | Время, ns/op | Память, B/op | Выделений памяти, allocs/op |
|------------------|-------------:|-------------:|----------------------------:|
| базовая          |        9 637 |        5 872 |                          92 |
| предобработка    |       11 592 |        5 488 |                          86 |
| оптимизированный |        7 710 |        2 856 |                          41 |
| regexp           |       16 421 |        2 446 |                          33 |
| исходный         |       25 965 |        9 498 |                         173 |

### Последовательный разбор всех тестовых образцов

| Версия алгоритма | Время, ns/op | Память, B/op | Выделений памяти, allocs/op |
|------------------|-------------:|-------------:|----------------------------:|
| базовая          |      116 660 |       41 832 |                         863 |
| предобработка    |      142 590 |       47 144 |                         957 |
| оптимизированный |       97 680 |       25 992 |                         631 |
| regexp           |      204 595 |       27 011 |                         693 |
| исходный         |      356 495 |      112 458 |                       3 545 |

### Последовательный разбор настоящих образцов

| Версия алгоритма | Время, ns/op | Память, B/op | Выделений памяти, allocs/op |
|------------------|-------------:|-------------:|----------------------------:|
| базовая          |   18 294 841 |    7 930 132 |                     130 430 |
| предобработка    |   18 011 552 |    7 917 277 |                     129 945 |
| оптимизированный |   11 697 162 |    4 094 088 |                      63 696 |
| regexp           |   23 079 911 |    3 308 944 |                      51 065 |
| исходный         |   32 981 645 |   13 850 000 |                     260 962 |

### Выводы

- Вариант с двумя сложными автоматами получился наиболее быстрым. Однако, он
  достаточно сложен в поддержке (нужно понимать как настроить конечный автомат).
- Вариант с регулярными выражениями наиболее простой для понимания. Интересно отметить,
  что он так же получается более эффективным по памяти.
