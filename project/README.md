# Проектная работа

## План

* [x] базовый паттерн
* [x] все паттерны
* [x] выделение значений и типов
* [x] причесать
* [x] бенчмарк
* [x] исследование вариантов
    * [x] v1 базовая версия с последовательностью конечных автоматов
    * [x] v2 вариант оптимизации с предобработкой строки (нижний регистр, схлопывание пробелов)
    * [x] v3 группировка конечных автоматов
    * [x] v4 алгоритм на регулярках
    * [x] исходный алгоритм на регулярках
* [x] оптимизации
    * [x] предобработка строки + пробел в конец строки
    * [x] вместо буферной строки - начало и конец отрезка текста (оптимизация памяти)
        * обязательно нужна предобработка строки, иначе в выделениях будут лишние пробелы
    * [x] ~~предрасчет длин слов для выделения памяти под строковый буфер~~
    * [x] объединить автоматы слов и шифров
    * [x] ~~индексированный массив вместо дерева (теоретически оптимизация по кешу процессора)~~
* [x] составить презентацию

## Тестирование эффективности алгоритмов

### Разбор полного образца

| Версия алгоритма | Время, ns/op | Память, B/op | Выделений памяти, allocs/op |
|------------------|-------------:|-------------:|----------------------------:|
| базовая          |        9 637 |        5 872 |                          92 |
| предобработка    |       11 592 |        5 488 |                          86 |
| оптимизированный |        7 710 |        2 856 |                          41 |
| regexp           |       16 421 |        2 446 |                          33 |
| исходный         |       25 965 |        9 498 |                         173 |

### Последовательный разбор всех тестовых образцов

| Версия алгоритма | Время, ns/op | Память, B/op | Выделений памяти, allocs/op |
|------------------|-------------:|-------------:|----------------------------:|
| базовая          |      116 660 |       41 832 |                         863 |
| предобработка    |      142 590 |       47 144 |                         957 |
| оптимизированный |       97 680 |       25 992 |                         631 |
| regexp           |      204 595 |       27 011 |                         693 |
| исходный         |      356 495 |      112 458 |                       3 545 |

### Последовательный разбор настоящих образцов

| Версия алгоритма | Время, ns/op | Память, B/op | Выделений памяти, allocs/op |
|------------------|-------------:|-------------:|----------------------------:|
| базовая          |   18 294 841 |    7 930 132 |                     130 430 |
| предобработка    |   18 011 552 |    7 917 277 |                     129 945 |
| оптимизированный |   11 697 162 |    4 094 088 |                      63 696 |
| regexp           |   23 079 911 |    3 308 944 |                      51 065 |
| исходный         |   32 981 645 |   13 850 000 |                     260 962 |
