# Реализация вероятностного алгоритма

## Цель

Исследование и реализация вероятностного алгоритма. Это тренирует навык применения
и разработки вероятностных алгоритмов для решения рабочих задач.

## Задание

* Взять готовую реализацию одного из алгоритмов: Bloom Filter, MinHash, SimHash, HyperLogLog или Count-Min Sketch для
  вашего языка программирования для ее изучения;
* изучить код реализации;
* вариант повышенной сложности (опционально): самим реализовать этот алгоритм;
* найти большой датасет, подходящий для выбранного алгоритма;
* применить ее для решения практической задачи: например, определить, принаджежит ли элемент множеству, подсчитать число
  уникальных элементов в большом массиве данных или подсчитать числа вхождений каждого элемента в большой массив данных;
* оценить точность реализации (% ошибок, false positives и т.д.) с помощью тестов.

## Фильтр Блума

В качестве алгоритма для изучения был выбран фильтр Блума. Собственная реализация алгоритма представлена в
пакете `bloom`. В реализации в качестве алгоритма хеширования используется алгоритм SHA256, представленный
в стандартной библиотеке Golang.

Для сравнения была выбрана библиотека <https://github.com/bits-and-blooms/bloom>.

Результаты тестирования алгоритмов на большом датасете (около 350 000 URL). В качестве переменного
параметра взята вероятность ложноположительного результата `p`. В таблице представлено
соотношение false positive к total positives.

### Собственная реализация алгоритма

| p     | total positives | false positives |     rate | size, KB |
|-------|----------------:|----------------:|---------:|---------:|
| 0.1   |         103 196 |            3196 | 0.030970 |      292 |
| 0.01  |         100 171 |             171 | 0.001707 |      585 |
| 0.001 |         100 013 |              13 | 0.000129 |      877 | 

### Реализация [bits-and-blooms](https://github.com/bits-and-blooms/bloom)

| p     | total positives | false positives |     rate | size, KB |
|-------|----------------:|----------------:|---------:|---------:|
| 0.1   |         102 790 |            2790 | 0.027142 |      308 |
| 0.01  |         100 115 |             115 | 0.001148 |      601 |
| 0.001 |         100 007 |               7 | 0.000069 |      893 |

## Источник данных

В качестве источника данных с большим датасетом был взят список URL для обучения нейронных сетей.

Ссылка <https://www.kaggle.com/datasets/teseract/urldataset?resource=download>

## Выводы

Вероятностный алгоритм Блума позволяет значительно сократить требования по работе с памятью
для больших датасетов. Для решения специфической задачи (проверка на вхождение в множество)
алгоритм гарантирует отсутствие ложно отрицательных результатов, однако возможны
исходы с ложноположительными результатами. Вероятностью ложноположительных результатов можно
управлять с помощью выбора параметров алгоритма.

Результаты тестирования на ложноположительные результаты соответствуют ожидаемому
параметру вероятности `p`.

## Запуск кода

Запуск тестов

```shell
go mod download
go test -v ./...
```
