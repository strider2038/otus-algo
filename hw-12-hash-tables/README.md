# Домашнее задание №12 "Хэш-таблицы"

## Цель

Научиться реализовывать хеш-таблицу.

## Задание

* Реализовать хеш-таблицу, использующую метод цепочек
* Реализовать хеш-таблицу с открытой адресацией
    * реализовать "ленивое" удаление
    * реализовать квадратичный пробинг

## Сравнение хеш-таблиц

### Реализация

* Хеш-таблица, использующая метод цепочек реализована в пакете `chainmap`
* Хеш-таблица с открытой адресацией реализована в пакете `openmap`

### Запись N элементов

Для сравнения используется последовательное заполнение карты на N элементов.
Необходимо учитывать, что постепенное заполнение приводит к рехешированию карт.
Хеш-таблица из стандартной библиотеки основана на механизме бакетов <https://habr.com/ru/post/704796/>.

| N         | Хеш-таблица с цепочками | Хеш-таблица с открытой адресацией | Хеш-таблица из ст. библиотеки |
|-----------|-------------------------|-----------------------------------|-------------------------------|
| 1 000     | 1.1 ms                  | 609 µs                            | 75 µs                         |
| 10 000    | 5.2 ms                  | 6.4 ms                            | 607 µs                        |
| 100 000   | 51.1 ms                 | 76 ms                             | 8.8 ms                        |
| 1 000 000 | 877 ms                  | 1 s                               | 233 ms                        |

### Среднее время чтения

Среднее время чтения из карты с N элементами.

| N         | Хеш-таблица с цепочками | Хеш-таблица с открытой адресацией | Хеш-таблица из ст. библиотеки |
|-----------|-------------------------|-----------------------------------|-------------------------------|
| 1 000     | 333 ns                  | 364 ns                            | 33 ns                         |
| 10 000    | 217 ns                  | 221 ns                            | 39 ns                         |
| 100 000   | 252 ns                  | 280 ns                            | 56 ns                         |
| 1 000 000 | 344 ns                  | 351 ns                            | 99 ns                         |

## Выводы

* По производительности разницы между картой с открытой адресацией и на основе цепочек не видно.
* Хеш-таблица с открытой адресацией эффективнее использует память (фактически один выделенный массив).
  Соответственно, ее полезнее использовать при заранее известном количестве элементов.
* Стандартная хеш-таблица эффективнее. Вероятнее всего за счет более эффективной хеш-функции.

## Запуск кода

Для запуска тестов необходимо распаковать архив с данными для тестов в директорию `testdata/sortdata`

Запуск тестов

```shell
go test -v ./...
```
